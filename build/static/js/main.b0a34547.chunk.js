(this["webpackJsonpreact-gol-3d"]=this["webpackJsonpreact-gol-3d"]||[]).push([[0],{137:function(e,t,a){},139:function(e,t,a){},220:function(e,t,a){"use strict";a.r(t);var i=a(0),r=a(26),n=a.n(r),s=a(2),c=a(3),l=a(5),h=a(6),o=(a(137),a(11)),d=a(28),u=a(41),b=a(23),m=a(25),p=a.n(m);function x(e){return Math.floor(Math.random()*e)}function v(){for(var e=0,t=0;0===e;)e=Math.random();for(;0===t;)t=Math.random();var a=Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t);return(a=a/10+.5)>1||a<0?v():a}function j(e){return Math.floor(v()*e)}function f(e,t,a,i){for(var r=i.length-1,n=i[0].length-1,s=i[0][0].length-1,c=0,l=Math.max(0,e-1);l<=Math.min(e+1,r);l++)for(var h=Math.max(0,t-1);h<=Math.min(t+1,n);h++)for(var o=Math.max(0,a-1);o<=Math.min(a+1,s);o++)l===e&&h===t&&o===a||1!==i[l][h][o]||c++;return c}var g=a(115),O=a(13),M=(a(139),a(118)),w=a(269),y=a(270),S=a(271),k=a(268),C=a(272),D=a(265),L=a(261),P=a(264),W=a(266),H=a(263),E=(a(140),a(47)),I=a(125),A=a.n(I),N=a(123),T=a.n(N),B=a(4),R=["value","dragging","index"],F=["value","dragging","index"],U=E.c.Handle,z=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var r;Object(s.a)(this,a),(r=t.call(this,e)).state={width:0,height:0,cubeColorScheme:"rainbow",menuCollapse:!1,arrowPoint:180,menuShowText:"Show"},r.initSpace=function(){r.scene.background=new O.d(4473992),r.renderer.setSize(r.state.width,r.state.height),r.camera=new O.k(75,r.state.width/r.state.height,1,1e4),r.controls=new g.a(r.camera,r.renderer.domElement),r.camera.position.z=150,r.controls.update(),r.divElement.appendChild(r.renderer.domElement);for(var e=0;e<r.cubeMatrix.length;e++)for(var t=0;t<r.cubeMatrix[0].length;t++)for(var a=0;a<r.cubeMatrix[0][0].length;a++)r.scene.add(r.cubeCollection[e][t][a]);var i=new O.a(14540253);r.scene.add(i),r.effect=new M.a(r.renderer),r.seedMatrix()},r.seedClusters=function(e){for(var t=[],a=0;a<r.cubeMatrix.length;a++){for(var i=[],n=0;n<r.cubeMatrix[0].length;n++){for(var s=[],c=0;c<r.cubeMatrix[0][0].length;c++)s.push(r.cubeMatrix[a][n][c]);i.push(s)}t.push(i)}for(var l=function(t){for(var a=function(a){for(var i=function(i){e.forEach((function(e){e.forEach((function(e){var n=j(r.maxClusterSize),s=function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2));return Math.max(0,(Math.abs(1-i)+a-r)/r)}(e,[t,a,i],n,r.clusterDensity);s>0&&((Math.random()<=s||e.toString()===[t,a,i])&&(r.cubeMatrix[t][a][i]=1));r.cubeMatrix[e[0]][e[1]][e[2]]=1}))}))},n=0;n<r.cubeMatrix[0][0].length;n++)i(n)},i=0;i<r.cubeMatrix[0].length;i++)a(i)},h=0;h<r.cubeMatrix.length;h++)l(h);r.start()},r.updateSpeed=function(e){r.maxTimer=Math.round(1/r.speedSlider[e])},r.updateOutline=function(e){r.outLine=!r.outLine;for(var t=0;t<r.cubeMatrix.length;t++)for(var a=0;a<r.cubeMatrix[0].length;a++)for(var i=0;i<r.cubeMatrix[0][0].length;i++){var n=f(t,a,i,r.cubeMatrix);n<=r.minDeath||n>r.maxDeath?r.cubeMatrix[t][a][i]=0:n>=r.minLive&&n<=r.maxLive&&(r.cubeMatrix[t][a][i]=1);var s=r.scene.getObjectById(r.cubeCollection[t][a][i].id);r.outLine?s.material.userData.outlineParameters.thickness=.002:s.material.userData.outlineParameters.thickness=0}},r.updateDead=function(e){r.showDead=!r.showDead},r.updateOpacity=function(e){r.opacity=e;for(var t=0;t<r.cubeMatrix.length;t++)for(var a=0;a<r.cubeMatrix[0].length;a++)for(var i=0;i<r.cubeMatrix[0][0].length;i++){var n=f(t,a,i,r.cubeMatrix);n<=r.minDeath||n>r.maxDeath?r.cubeMatrix[t][a][i]=0:n>=r.minLive&&n<=r.maxLive&&(r.cubeMatrix[t][a][i]=1),r.scene.getObjectById(r.cubeCollection[t][a][i].id).material.opacity=r.opacity}},r.updateDeath=function(e){r.minDeath=Math.min(e[0],e[1]),r.maxDeath=Math.max(e[0],e[1])},r.updateLife=function(e){r.minLive=Math.min(e[0],e[1]),r.maxLive=Math.max(e[0],e[1])},r.updateColorScheme=function(e){r.setState({cubeColorScheme:e.target.value},r.setColors)},r.handleCollapse=function(e){var t,a=(r.state.arrowPoint+180)%360;t="Show"===r.state.menuShowText?"Hide":"Show",r.setState({menuCollapse:!r.state.menuCollapse,arrowPoint:a,menuShowText:t})},r.updateResetOnStalemate=function(e){r.resetOnStaleMate=!r.resetOnStaleMate},r.componentDidMount=Object(u.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){document.getElementById("pannel").classList.add("mainPannel")}),3e3),r.updateWindowDimensions(),r.updateWindowDimensions=r.updateWindowDimensions.bind(Object(b.a)(r)),document.addEventListener("keydown",r.handlePress,!1);case 4:case"end":return e.stop()}}),e)}))),r.divElement=Object(i.createRef)(),r.showDead=!1,r.cubeHeight=10,r.resetOnStaleMate=!0,r.reset=!1,r.cubeWidth=10,r.cubeDepth=10,r.outLine=!0,r.opacity=.65,r.cubeMatrix=[];for(var n=0;n<r.cubeWidth;n++){for(var c=[],l=0;l<r.cubeHeight;l++){for(var h=[],o=0;o<r.cubeDepth;o++)h.push(0);c.push(h)}r.cubeMatrix.push(c)}r.speedSlider={0:.01,1:.025,2:.1,3:.75,4:.1,5:.2,6:.3,7:.4,8:.5,9:1},r.maxDeath=8,r.minDeath=4,r.minLive=6,r.maxLive=6,r.timer=0,r.maxTimer=4,r.clusterStarterPercentage=.1,r.maxClusterSize=10,r.clusterDensity=1,r.paused=!1,r.renderer=new O.v,r.camera=void 0,r.scene=new O.n,r.effect=void 0,r.controls=void 0,r.frameId=void 0,r.animate=r.animate.bind(Object(b.a)(r)),r.renderScene=r.renderScene.bind(Object(b.a)(r)),r.handlePress=r.handlePress.bind(Object(b.a)(r)),r.updateCubes=r.updateCubes.bind(Object(b.a)(r)),r.seedMatrix=r.seedMatrix.bind(Object(b.a)(r)),r.seedClusters=r.seedClusters.bind(Object(b.a)(r)),r.updateOpacity=r.updateOpacity.bind(Object(b.a)(r)),r.geometry=new O.c(9,9,9),r.cubeCollection=[];for(var d=r.renderer.capabilities.isWebGL2?O.m:O.g,m=-r.cubeHeight/2,x=0;m<r.cubeHeight/2;m++,x+=.1){for(var v=[],w=-r.cubeWidth/2;w<r.cubeWidth/2;w++){for(var y=[],S=new Uint8Array(x+2),k=0;k<=S.length;k++)S[k]=k/S.length*256;var C=new O.e(S,S.length,1,d);C.needsUpdate=!0;for(var D=-r.cubeDepth/2;D<r.cubeDepth/2;D++){var L=r.colorPicker(m,w,D),P=new O.j({color:L,gradientMap:C,opacity:r.opacity,transparent:!0});P.userData.outlineParameters={thickness:.002,keepAlive:!0};var W=new O.i(r.geometry,P);W.position.set(10*m,10*w,10*D),y.push(W)}v.push(y)}r.cubeCollection.push(v)}return r}return Object(c.a)(a,[{key:"seedMatrix",value:function(){for(var e=[],t=0;t<this.cubeMatrix.length;t++){for(var a=[],i=0;i<this.cubeMatrix[0].length;i++){for(var r=[],n=0;n<this.cubeMatrix[0][0].length;n++)r.push(0);a.push(r)}e.push(a)}for(var s=e.length,c=e[0].length,l=e[0][0].length,h=this.clusterStarterPercentage/100*(c*s*l),o=[];h>0;){var d=x(s),u=x(c),b=x(l);1!==e[d][u][b]&&(e[d][u][b]=1,o.push([d,u,b]),h--)}this.seedClusters(e,o)}},{key:"start",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate))}},{key:"stop",value:function(){cancelAnimationFrame(this.frameId)}},{key:"renderScene",value:function(){this.renderer.render(this.scene,this.camera),this.effect.render(this.scene,this.camera)}},{key:"updateCubes",value:function(){for(var e=[],t=0;t<this.cubeMatrix.length;t++){for(var a=[],i=0;i<this.cubeMatrix[0].length;i++){for(var r=[],n=0;n<this.cubeMatrix[0][0].length;n++)r.push(this.cubeMatrix[t][i][n]);a.push(r)}e.push(a)}for(var s=!0,c=0;c<this.cubeMatrix.length;c++)for(var l=0;l<this.cubeMatrix[0].length;l++)for(var h=0;h<this.cubeMatrix[0][0].length;h++){var o=f(c,l,h,this.cubeMatrix);o<=this.minDeath||o>this.maxDeath?this.cubeMatrix[c][l][h]=0:o>=this.minLive&&o<=this.maxLive&&(this.cubeMatrix[c][l][h]=1);var d=this.scene.getObjectById(this.cubeCollection[c][l][h].id);void 0!==d&&(1===this.cubeMatrix[c][l][h]?(d.scale.set(1,1,1),d.visible=!0):this.showDead?(d.scale.set(.1,.1,.1),d.visible=!0):d.visible=!1)}for(var u=0;u<this.cubeMatrix.length;u++)for(var b=0;b<this.cubeMatrix[0].length;b++)for(var m=0;m<this.cubeMatrix[0][0].length;m++)this.cubeMatrix[u][b][m]!==e[u][b][m]&&(s=!1);s&&this.resetOnStaleMate&&(this.reset=!0,this.resetMatrix(),this.seedMatrix())}},{key:"animate",value:function(){this.controls.update(),0!==this.timer||this.paused||this.updateCubes(),this.timer++,this.timer%=this.maxTimer,this.renderScene(),this.reset||(this.frameId=requestAnimationFrame(this.animate))}},{key:"componentWillUnmount",value:function(){this.stop(),window.removeEventListener("resize",this.onResize),document.removeEventListener("keydown",this.handlePress,!1)}},{key:"clearThree",value:function(e){for(;e.children.length>0;)this.clearThree(e.children[0]),e.remove(e.children[0]);e.geometry&&e.geometry.dispose(),e.material&&(Object.keys(e.material).forEach((function(t){e.material[t]&&null!==e.material[t]&&"function"===typeof e.material[t].dispose&&e.material[t].dispose()})),e.material.dispose())}},{key:"colorPicker",value:function(e,t,a){var i;switch(this.state.cubeColorScheme){case"rainbow":default:i=(new O.d).setHSL(.1*e,.5,.5).multiplyScalar(1-.02*t);break;case"random":i=(new O.d).setHSL(Math.random(),.5,.5).multiplyScalar(1-.02*t);break;case"white":i=(new O.d).setHSL(1,1,1);break;case"black":i=(new O.d).setHSL(0,0,0);break;case"randomBlackAndWhite":if(!(Math.random()<.5)){i=(new O.d).setHSL(1,1,1).multiplyScalar(1);break}i=(new O.d).setHSL(0,0,0).multiplyScalar(0);break;case"randomRGB":var r=Math.random();if(r<.333333)i=(new O.d).setHSL(0,1,.5).multiplyScalar(1);else{if(r<.666666){i=(new O.d).setHSL(.333,1,.5).multiplyScalar(1);break}i=(new O.d).setHSL(.66,1,.5).multiplyScalar(1)}break;case"what":i=(new O.d).setHSL(Math.random(),Math.random(),Math.random())}return i}},{key:"resetMatrix",value:function(){cancelAnimationFrame(this.frameId),this.frameId=!1,this.clearThree(this.scene),this.renderer.state.reset();for(var e=0;e<this.cubeMatrix.length;e++)for(var t=0;t<this.cubeMatrix[0].length;t++)for(var a=0;a<this.cubeMatrix[0][0].length;a++)this.cubeMatrix[e][t][a]=0;this.cubeCollection=[];for(var i=this.renderer.capabilities.isWebGL2?O.m:O.g,r=-this.cubeHeight/2,n=0;r<this.cubeHeight/2;r++,n+=.1){for(var s=[],c=-this.cubeWidth/2;c<this.cubeWidth/2;c++){for(var l=[],h=new Uint8Array(.1*n+2),o=0;o<=h.length;o++)h[o]=o/h.length*256;var d=new O.e(h,h.length,1,i);d.needsUpdate=!0;for(var u=-this.cubeDepth/2;u<this.cubeDepth/2;u++){var b=this.colorPicker(r,c,u),m=new O.j({color:b,gradientMap:d,opacity:this.opacity,transparent:!0});m.userData.outlineParameters={thickness:.002,keepAlive:!0};var p=new O.i(this.geometry,m);p.position.set(10*r,10*c,10*u),l.push(p),this.scene.add(p)}s.push(l)}this.cubeCollection.push(s)}var x=new O.a(14540253);this.scene.add(x),this.reset=!1,this.seedMatrix()}},{key:"handlePress",value:function(e){"p"===e.key&&(this.paused=!this.paused),"r"===e.key&&(this.reset=!0,this.resetMatrix()),"+"===e.key&&(this.maxTimer/=2),"-"===e.key&&(this.maxTimer*=2)}},{key:"updateWindowDimensions",value:function(){this.setState({width:this.divElement.clientWidth,height:this.divElement.clientHeight},this.initSpace)}},{key:"setColors",value:function(){for(var e=this.renderer.capabilities.isWebGL2?O.m:O.g,t=-this.cubeHeight/2,a=0,i=0;t<this.cubeHeight/2;t++,i++,a+=.1)for(var r=-this.cubeWidth/2,n=0;r<this.cubeWidth/2;r++,n++){for(var s=new Uint8Array(a+2),c=0;c<=s.length;c++)s[c]=c/s.length*256;var l=new O.e(s,s.length,1,e);l.needsUpdate=!0;for(var h=-this.cubeDepth/2,o=0;h<this.cubeDepth/2;h++,o++){var d=this.colorPicker(t,r,h),u=new O.j({color:d,gradientMap:l,opacity:this.opacity,transparent:!0});u.userData.outlineParameters={thickness:.002,keepAlive:!0};var b=this.scene.getObjectById(this.cubeCollection[i][n][o].id);b.material=u,this.outLine?b.material.userData.outlineParameters.thickness=.002:b.material.userData.outlineParameters.thickness=0}}}},{key:"handleSpeed",value:function(e){var t=e.value,a=(e.dragging,e.index),i=Object(d.a)(e,R);return Object(B.jsx)(E.b,{prefixCls:"rc-slider-tooltip",overlay:{0:"Ultra Slow",1:"Super Slow",2:"Slow",3:"Normal",4:"Slightly Faster",5:"Faster",6:"Fast",7:"Very Fast",8:"Stupid Fast",9:"Why"}[t],placement:"top",children:Object(B.jsx)(U,Object(o.a)({value:t},i))},a)}},{key:"handleSliders",value:function(e){var t=e.value,a=e.dragging,i=e.index,r=Object(d.a)(e,F);return Object(B.jsx)(E.b,{prefixCls:"rc-slider-tooltip",overlay:t,visible:a,placement:"top",children:Object(B.jsx)(U,Object(o.a)({value:t},r))},i)}},{key:"render",value:function(){var e=this;return Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)("div",{className:"mainContainer",children:[Object(B.jsx)(T.a,{cancel:".rc-slider",children:Object(B.jsx)(w.a,{container:!0,sx:{width:"33%",bgcolor:"text.secondary",padding:"1vw"},className:"container",children:Object(B.jsxs)(w.a,{id:"pannel",children:[Object(B.jsx)("label",{htmlFor:"icon-button-toggle",children:Object(B.jsxs)(y.a,{color:"primary","aria-label":"hide show pannel",component:"span",onClick:this.handleCollapse,children:[Object(B.jsx)(A.a,{style:{transform:"rotate(".concat(this.state.arrowPoint,"deg)"),color:"white"}}),Object(B.jsxs)("button",{className:"aNoStyle white-text",children:[this.state.menuShowText," menu"]})]})}),Object(B.jsx)("div",{className:"noHover",children:Object(B.jsxs)(S.a,{in:this.state.menuCollapse,children:[Object(B.jsxs)(k.a,{className:"instructions",item:!0,xs:12,children:[Object(B.jsx)("p",{children:"Press 'r' to restart (re-seed the board)"}),Object(B.jsx)("p",{children:"Press 'p' to pause"}),Object(B.jsx)("p",{children:"Use mouse to orbit around the cube"})]}),Object(B.jsxs)(k.a,{container:!0,spacing:2,children:[Object(B.jsxs)(k.a,{item:!0,xs:6,children:[Object(B.jsx)("label",{children:"Speed"}),Object(B.jsx)(E.c,{id:"speedSlider",className:"rc-slider",min:0,max:9,marks:this.speedSlider,defaultValue:3,step:null,onChange:this.updateSpeed.bind(this),handle:this.handleSpeed.bind(this)})]}),Object(B.jsxs)(k.a,{item:!0,xs:6,children:[Object(B.jsx)("label",{children:"Opacity"}),Object(B.jsx)(E.c,{id:"opacitySlider",className:"rc-slider",min:0,max:1,defaultValue:.65,step:.01,onChange:function(t){return e.updateOpacity(t)},handle:this.handleSliders.bind(this)})]}),Object(B.jsxs)(k.a,{item:!0,xs:6,children:[Object(B.jsx)("label",{children:"Death range"}),Object(B.jsx)(E.a,{id:"deathSlider",className:"rc-slider",min:0,max:26,range:!0,inverted:!0,defaultValue:[4,8],trackStyle:{backgroundColor:"grey"},railStyle:{backgroundColor:"red"},step:1,onChange:this.updateDeath.bind(this),handle:this.handleSliders.bind(this)})]}),Object(B.jsxs)(k.a,{item:!0,xs:6,children:[Object(B.jsx)("label",{children:"Life range"}),Object(B.jsx)(E.a,{id:"lifeSlider",className:"rc-slider",min:0,max:26,range:!0,inverted:!0,defaultValue:[6,6],railStyle:{backgroundColor:"grey"},trackStyle:{backgroundColor:"green"},minimumTrackStyle:{backgroundColor:"green"},step:1,onChange:this.updateLife.bind(this),handle:this.handleSliders.bind(this)})]})]}),Object(B.jsx)(k.a,{item:!0,xs:12,className:"controls",pt:2,children:Object(B.jsxs)(k.a,{container:!0,children:[Object(B.jsx)(k.a,{item:!0,xs:6,children:Object(B.jsx)(k.a,{item:!0,xs:9,children:Object(B.jsx)(w.a,{sx:{minWidth:120},children:Object(B.jsxs)(C.a,{fullWidth:!0,variant:"filled",sx:{m:1,minWidth:120,zIndex:1e4},children:[Object(B.jsx)(D.a,{id:"select-filled-label",children:"Color scheme"}),Object(B.jsxs)(L.a,{MenuProps:{style:{zIndex:35001}},value:this.state.cubeColorScheme,defaultValue:"rainbow",onChange:this.updateColorScheme.bind(null),sx:{color:"white",label:{color:"white"},backgroundColor:"#d3d3d31c",borderRadius:"10px"},children:[Object(B.jsx)(P.a,{value:"rainbow",children:"Rainbow"}),Object(B.jsx)(P.a,{value:"black",children:"Black"}),Object(B.jsx)(P.a,{value:"white",children:"White"}),Object(B.jsx)(P.a,{value:"random",children:"Random"}),Object(B.jsx)(P.a,{value:"randomBlackAndWhite",children:"Random black and white"}),Object(B.jsx)(P.a,{value:"randomRGB",children:"Random RGB"}),Object(B.jsx)(P.a,{value:"what",children:"Even more random"})]})]})})})}),Object(B.jsx)(k.a,{item:!0,xs:6,children:Object(B.jsx)(W.a,{control:Object(B.jsx)(H.a,{defaultChecked:!1}),label:"Show dead cubes (decreases performance)",onChange:this.updateDead.bind(this)})}),Object(B.jsx)(k.a,{item:!0,xs:6,children:Object(B.jsx)(W.a,{control:Object(B.jsx)(H.a,{defaultChecked:!0}),label:"Auto-reset on stalemate",onChange:this.updateResetOnStalemate.bind(this)})}),Object(B.jsx)(k.a,{item:!0,xs:6,children:Object(B.jsx)(W.a,{control:Object(B.jsx)(H.a,{defaultChecked:!0}),label:"Show outline",onChange:this.updateOutline.bind(this)})})]})})]})})]})})}),Object(B.jsx)("div",{className:"canvasContainer",ref:function(t){e.divElement=t}})]})})}}]),a}(i.Component),G=z,V=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(B.jsx)("div",{className:"App",children:Object(B.jsx)(G,{})})}}]),a}(i.Component),q=V;n.a.render(Object(B.jsx)(q,{}),document.getElementById("root"))}},[[220,1,2]]]);
//# sourceMappingURL=main.b0a34547.chunk.js.map